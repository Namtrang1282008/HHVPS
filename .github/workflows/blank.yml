name: VPS-LINUX-CHuan-DET
on: workflow_dispatch

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: üõ†Ô∏è 1. Cai dat He thong
        run: |
          # Cai dat im lang de tranh loi
          curl -fsSL https://tailscale.com/install.sh | sh > /dev/null 2>&1
          # Lenh nay se tu dong bo qua cac buoc xac thuc treo
          sudo tailscale up --authkey=${{ secrets.TAILSCALE_AUTHKEY }} --accept-dns=false --timeout=30s || echo "Tiep tuc chay..."

      - name: üîë 2. Thiet lap SSH & Info
        run: |
          # Tao mat khau moi
          echo "runner:vps12345" | sudo chpasswd
          sudo service ssh start
          
          # Lay IP va in ra man hinh ngay lap tuc
          IP_ADDR=$(tailscale ip -4)
          echo -e "\n\033[1;32m=========================================="
          echo -e "   INFO VPS CUA BAN (COPY VAO TERMIUS)"
          echo -e "=========================================="
          echo -e "üìç IP: $IP_ADDR"
          echo -e "üë§ USER: runner"
          echo -e "üîë PASS: vps12345"
          echo -e "üö™ PORT: 22"
          echo -e "==========================================\033[0m\n"

      - name: ‚è≥ 3. Duy tri (Khong cho chet may)
        run: |
          echo "VPS dang hoat dong trong 6 gio..."
          sleep 21600
